(()=>{const e=document.getElementById("addCategoryButton"),t=document.getElementById("addTaskButton"),i=document.getElementById("submitButton"),n=document.getElementById("cancelButton");let a=document.querySelector(".inputTable"),o=document.getElementById("inputTableContainer"),d=[];class s{constructor(e,t){this.id=e,this.tasks=t,this.active=!1}}class l{constructor(e,t,i,n,a){this.id=e,this.dueDate=t,this.priority=i,this.checklist=!1,this.notes=a}}function c(){let e=0;bottomLeftCategoryContainer.textContent="",d.forEach((t=>{let i=document.createElement("p");i.classList.add("newCategory"),i.textContent=t.id,bottomLeftCategoryContainer.appendChild(i),i.setAttribute("id",""+e),i.setAttribute("data-index",""+e);let n=document.createElement("div");n.classList.add("deleteCategoryButton"),n.setAttribute("data-index",""+e),i.appendChild(n),e++})),e=0,r()}e.addEventListener("click",(()=>{let e=prompt("Name of your category");if(""===e)alert("Please Enter a Value");else if(e){let t=new s(e,[]);d.push(t),c(),r()}}));const r=()=>{let e=Array.from(document.getElementsByClassName("newCategory")),t=Array.from(document.getElementsByClassName("deleteCategoryButton")),i=Array.from(document.getElementsByClassName("deleteTaskButton"));e.forEach((e=>{e.addEventListener("click",u),e.addEventListener("click",m)})),t.forEach((e=>{e.addEventListener("click",g)})),i.forEach((e=>{e.addEventListener("click",p)}))},u=e=>{topRightContainer.textContent="";let t=e.target.id,i=document.createElement("h1");i.textContent=d[t].id,i.setAttribute("id","categoryHeading"),topRightContainer.appendChild(i)},m=e=>{let t=Array.from(document.getElementsByClassName("newCategory"));t.forEach((e=>{e.classList.remove("activeCategory")}));let i=e.target.id;t[i].classList.add("activeCategory"),d.forEach((e=>{e.active=!1})),d[i].active=!0,y()};t.addEventListener("click",(e=>{const t=document.getElementById("taskInputField").value;if(e.preventDefault(),""===t)alert("Please Enter a Value");else if(t){let e=document.getElementById("taskTitleForm");a.classList.remove("inputTable"),a.classList.add("inputTableActive"),o.setAttribute("id","inputTableContainerActive"),e.textContent="Details For "+t}})),i.addEventListener("click",(()=>{let e,t=document.getElementById("taskInputField").value,i=document.getElementById("dueDate").value;document.getElementById("highPriority").checked?e="High":document.getElementById("mediumPriority").checked?e="Medium":document.getElementById("lowPriority").checked&&(e="Low");let n=document.getElementById("notes").value,s=new l(t,i,e,!1,n);d.find((e=>!0===e.active)).tasks.push(s),a.classList.remove("inputTableActive"),o.setAttribute("id","inputTableContainer"),y()}));const y=()=>{let e=0;document.querySelectorAll(".tasksDisplay").forEach((e=>e.remove())),d.find((e=>!0===e.active)).tasks.forEach((t=>{let i=document.createElement("p");i.setAttribute("class","tasksDisplay"),i.textContent=`${t.id} Due: ${t.dueDate} Notes: ${t.notes}`,bottomRightContainer.appendChild(i),console.log(""+t.priority);let n=document.createElement("div");"High"==t.priority?n.classList.add("highPriorityIndicator"):"Medium"==t.priority?n.classList.add("mediumPriorityIndicator"):"Low"==t.priority&&n.classList.add("lowPriorityIndicator"),i.appendChild(n);let a=document.createElement("div");a.setAttribute("class","deleteTaskButton"),a.setAttribute("data-index",""+e),i.appendChild(a),e++})),e=0,r()},g=e=>{if(1==confirm("Delete Category?")){console.log("delete button clicked"),document.querySelectorAll(".tasksDisplay").forEach((e=>e.remove()));const t=e.target.dataset.index;console.log(t),d.splice(t,1),c()}},p=e=>{if(1==confirm("Delete Task?")){const t=d.find((e=>!0===e.active));console.log("Active cat ="+t);const i=e.target.dataset.index;console.log("index = "+i),t.tasks.splice(i,1),y()}};n.addEventListener("click",(()=>{a.classList.remove("inputTableActive"),a.classList.add("inputTable"),o.setAttribute("id","inputTableContainer")}))})();