(()=>{let e;e=localStorage.getItem("categoryCollection")?JSON.parse(localStorage.getItem("categoryCollection")):[],localStorage.setItem("categoryCollection",JSON.stringify(e)),JSON.parse(localStorage.getItem("categoryCollection"));const t=(()=>{class t{constructor(e,t){this.id=e,this.tasks=t,this.active=!1}}function i(){const e=document.getElementById("addCategoryButton");let t=Array.from(document.getElementsByClassName("newCategory")),n=Array.from(document.getElementsByClassName("deleteCategoryIcon"));t.forEach((e=>{e.addEventListener("click",o),e.addEventListener("click",l)})),n.forEach((e=>{e.addEventListener("click",d)})),e.addEventListener("click",a)}function a(){let n=prompt("Write the name of your category");if(""===n)alert("Please Enter a Value");else if(n){let a=new t(n,[]);e.push(a),c(),i(),localStorage.setItem("categoryCollection",JSON.stringify(e))}r()}function o(t){topRightContainer.textContent="";let n=t.target.id,i=document.createElement("h1");i.textContent=e[n].id,i.setAttribute("id","categoryHeading"),topRightContainer.appendChild(i)}function c(){let t=0;bottomLeftCategoryContainer.textContent="",e.forEach((e=>{let n=document.createElement("p");n.classList.add("newCategory"),n.textContent=e.id,bottomLeftCategoryContainer.appendChild(n),n.setAttribute("id",""+t),n.setAttribute("data-index",""+t);let i=document.createElement("i");i.setAttribute("class","fa fa-trash deleteCategoryIcon"),i.setAttribute("data-index",""+t),n.appendChild(i),t++})),t=0,i()}function l(t){let i=Array.from(document.getElementsByClassName("newCategory"));i.forEach((e=>{e.classList.remove("activeCategory")}));let a=t.target.id;i[a].classList.add("activeCategory"),r(),e[a].active=!0,localStorage.setItem("categoryCollection",JSON.stringify(e)),n.renderTasks()}function r(){e.forEach((e=>{e.active=!1}))}function d(t){if(1==confirm("Delete Category?")){document.querySelectorAll(".tasksDisplay .completedTasksDisplay").forEach((e=>e.remove()));const n=t.target.dataset.index;e.splice(n,1),localStorage.setItem("categoryCollection",JSON.stringify(e)),c()}}return i(),c(),r(),{identifyActiveCategory:function(){return e.find((e=>!0===e.active))}}})(),n=(()=>{const n=document.getElementById("addTaskButton"),i=document.getElementById("submitButton"),a=document.getElementById("cancelButton"),o=document.querySelector(".inputTable"),c=document.getElementById("inputTableContainer"),l=document.getElementById("importanceButton"),r=document.getElementById("dateButton");let d=!0;class s{constructor(e,t,n,i,a){this.id=e,this.dueDate=t,this.priority=n,this.checklist=!1,this.notes=a}}function u(){n.addEventListener("click",m),!0===d?i.addEventListener("click",y):i.addEventListener("click",C),Array.from(document.getElementsByClassName("deleteTaskIcon")).forEach((e=>{e.addEventListener("click",k)})),a.addEventListener("click",(()=>{o.classList.remove("inputTableActive"),o.classList.add("inputTable"),c.setAttribute("id","inputTableContainer")})),l.addEventListener("click",h),r.addEventListener("click",v),Array.from(document.getElementsByClassName("checkboxComplete")).forEach((e=>{e.addEventListener("click",f)})),Array.from(document.getElementsByClassName("editTaskIcon")).forEach((e=>{e.addEventListener("click",E),d=!1}))}function m(e){d=!0;const n=document.getElementById("taskInputField").value;if(e.preventDefault(),void 0===t.identifyActiveCategory())alert("Please Select a Category");else if(""===n)alert("Please Enter a Value");else if(n){let e=document.getElementById("taskTitleForm");o.classList.remove("inputTable"),o.classList.add("inputTableActive"),c.setAttribute("id","inputTableContainerActive"),e.textContent="Details For "+n}addEventListeners()}function y(){let e,t=document.getElementById("taskInputField").value,n=document.getElementById("dueDate").value;document.getElementById("highPriority").checked?e=1:document.getElementById("mediumPriority").checked?e=2:document.getElementById("lowPriority").checked?e=3:(alert("Please Select a Priority Level"),y());let i=document.getElementById("notes").value,a=new s(t,n,e,!1,i);console.log(a),g(a)}function g(n){t.identifyActiveCategory().tasks.push(n),o.classList.remove("inputTableActive"),c.setAttribute("id","inputTableContainer"),localStorage.setItem("categoryCollection",JSON.stringify(e)),p()}function p(){let t=0;document.querySelectorAll(".tasksDisplay").forEach((e=>e.remove())),document.querySelectorAll(".completedTasksDisplay").forEach((e=>e.remove())),e.find((e=>!0===e.active)).tasks.forEach((e=>{let n=document.createElement("div");0==e.checklist?n.setAttribute("class","tasksDisplay"):n.setAttribute("class","completedTasksDisplay");let i=document.createElement("div");i.setAttribute("class","taskInfoContainer"),bottomRightContainer.appendChild(n);let a=document.createElement("div");1==e.priority?a.classList.add("highPriorityIndicator"):2==e.priority?a.classList.add("mediumPriorityIndicator"):3==e.priority&&a.classList.add("lowPriorityIndicator");let o=document.createElement("div");o.setAttribute("class","taskNameAndDueDateContainer");let c=document.createElement("div");c.setAttribute("class","taskName"),c.textContent=""+e.id;let l=document.createElement("div");l.setAttribute("class","dueDate"),l.textContent="Due: "+e.dueDate;let r=document.createElement("div");r.setAttribute("class","notesContainer");let d=document.createElement("div");d.setAttribute("class","notesHeading");let s=document.createElement("div");s.setAttribute("class","notesContent"),s.textContent=""+e.notes,n.appendChild(a),n.appendChild(i),i.appendChild(o),o.appendChild(c),o.appendChild(l),i.appendChild(r),r.appendChild(d),r.appendChild(s),d.textContent="Notes";let u=document.createElement("div");u.setAttribute("class","deleteEditAndCheckContainer"),i.appendChild(u);let m=document.createElement("i");m.setAttribute("class","fa fa-trash deleteTaskIcon"),m.setAttribute("data-index",""+t),u.appendChild(m);let y=document.createElement("i");y.setAttribute("class","fa fa-edit editTaskIcon"),y.setAttribute("data-index",""+t),u.appendChild(y);let g=document.createElement("i");g.setAttribute("class","fa fa-check-circle checkboxComplete"),g.setAttribute("data-index",""+t),u.appendChild(g),t++})),t=0,u()}function f(t){let n=t.target.dataset.index,i=e.find((e=>!0===e.active)).tasks[n];i.checklist?i.checklist=!1:i.checklist=!0,localStorage.setItem("categoryCollection",JSON.stringify(e)),p()}function E(t){d=!1;let n=t.target.dataset.index,i=e.find((e=>!0===e.active)).tasks[n];o.classList.remove("inputTable"),o.classList.add("inputTableActive"),c.setAttribute("id","inputTableContainerActive");let a=document.getElementById("taskTitleForm"),l=document.getElementById("dueDate"),r=document.getElementById("notes"),s=document.getElementById("highPriority"),u=document.getElementById("mediumPriority"),m=document.getElementById("lowPriority");return a.textContent="Edit details For "+i.id,l.value=""+i.dueDate,r.textContent=""+i.notes,""+i.priority==1?s.setAttribute("checked","x"):""+i.priority==2?u.setAttribute("checked","x"):m.setAttribute("checked","x"),addEventListeners(),i}function C(){let t=E();console.log(t);let n,i=t.id,a=document.getElementById("dueDate").value;document.getElementById("highPriority").checked?n=1:document.getElementById("mediumPriority").checked?n=2:document.getElementById("lowPriority").checked&&(n=3);let o=document.getElementById("notes").value,c=new s(i,a,n,!1,o),l=e.find((e=>!0===e.active)),r=l.indexOf(t);l.tasks.splice(r,1),g(c)}function h(){console.log("order by importance"),e.find((e=>!0===e.active)).tasks.sort((function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:0})),localStorage.setItem("categoryCollection",JSON.stringify(e)),p()}function v(){console.log("order by date"),e.find((e=>!0===e.active)).tasks.sort((function(e,t){return e.dueDate>t.dueDate?1:e.dueDate<t.dueDate?-1:0})),localStorage.setItem("categoryCollection",JSON.stringify(e)),p()}function k(t){if(1==confirm("Delete Task?")){const n=e.find((e=>!0===e.active)),i=t.target.dataset.index;n.tasks.splice(i,1),localStorage.setItem("categoryCollection",JSON.stringify(e)),p()}}return u(),{renderTasks:p}})()})();